<!-- src/app/shared/components/header/header.component.html -->

<header class="header">
  <!-- Logo Section -->
  <div class="logo">
    <a [routerLink]="headerType === 'partner' ? '/partner/landing' : '/user'">
      {{ logoText }}
    </a>
  </div>

  <!-- Middle Section (for customer search bar when logged in) -->
  <div class="middle-section">
    <ng-content select="[search-bar]"></ng-content>
  </div>

  <!-- Right Section - Auth Buttons or User Info -->
  <div class="header-right">
    <!-- Logged Out State -->
    <ng-container *ngIf="!isAuthenticated">
      <div class="header-buttons">
        <app-button
          variant="white"
          [routerLink]="loginRoute"
          text="Login"
        ></app-button>
        <app-button
          variant="black"
          [routerLink]="registerRoute"
          [text]="registerButtonText"
        ></app-button>
      </div>
    </ng-container>

    <!-- Logged In State - Partner -->
    <ng-container *ngIf="isAuthenticated && headerType === 'partner'">
      <div class="user-info">
        <span class="welcome-text">Welcome, {{ currentUser?.userName }}</span>
        <app-button
          variant="white"
          text="Logout"
          (click)="onLogout()"
        ></app-button>
      </div>
    </ng-container>

    <!-- Logged In State - Customer -->
    <ng-container *ngIf="isAuthenticated && headerType === 'customer'">
      <div class="customer-actions">
        <!-- Notifications Icon -->
        <button class="icon-button notifications" aria-label="Notifications">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
          <span class="notification-badge">3</span>
        </button>

        <!-- Profile Dropdown -->
        <div class="profile-dropdown">
          <button
            class="icon-button profile"
            aria-label="Profile"
            (click)="toggleProfileDropdown()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>

          <!-- Dropdown Menu -->
          <div class="dropdown-menu" *ngIf="showProfileDropdown">
            <div class="dropdown-header">
              <strong>{{ currentUser?.userName }}</strong>
              <small>{{ currentUser?.email }}</small>
            </div>
            <div class="dropdown-divider"></div>
            <a
              routerLink="/user/profile"
              class="dropdown-item"
              (click)="closeDropdown()"
            >
              My Profile
            </a>
            <a
              routerLink="/user/bookings"
              class="dropdown-item"
              (click)="closeDropdown()"
            >
              My Bookings
            </a>
            <a
              routerLink="/user/settings"
              class="dropdown-item"
              (click)="closeDropdown()"
            >
              Settings
            </a>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item logout" (click)="onLogout()">
              Logout
            </button>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</header>
